# Malware Bazaar scripts with no hierarchy in directory, for easy search

Used following code:
```python

import os
import shutil
import zipfile
import pyzipper



# Make a "Flattened_Malware_Bazaar" directory where structure of Malware_Bazaar directory is broken (flattened),
# as the structure makes it hard to deal with.


def unzip_file(source_file, destination_path, password):
    with pyzipper.AESZipFile(source_file) as zip_ref:
        zip_ref.extractall(destination_path, pwd=password.encode('utf-8'))


if __name__ == "__main__":


   malware_bazaar_dirpath = "/home/jgwak1/tabby/Malware_Bazaar"
   flattened_malware_bazaar_dirpath = "/home/jgwak1/Flattened_Malware_Bazaar" # destination



   if not os.path.exists(flattened_malware_bazaar_dirpath):
      os.makedirs(flattened_malware_bazaar_dirpath)

   Malware_Bazaar_subdirnames = os.listdir(malware_bazaar_dirpath)

   for Malware_Bazaar_subdirname in Malware_Bazaar_subdirnames:

      print(f"{Malware_Bazaar_subdirname}", flush = True)


      if ".zip" in Malware_Bazaar_subdirname:
         source = os.path.join(malware_bazaar_dirpath, Malware_Bazaar_subdirname)
         unzip_file(source, flattened_malware_bazaar_dirpath, password="infected")
         continue

      
      subdir_all_filenames = os.listdir( os.path.join(malware_bazaar_dirpath, Malware_Bazaar_subdirname) )

      for subdir_filename in subdir_all_filenames:

         if "7184b3f7a03f954afff9d967a7b6d0656f1b04a47ab39af495d373fc0f37c5b5" in subdir_filename:
            print()

         source = os.path.join(malware_bazaar_dirpath, Malware_Bazaar_subdirname, subdir_filename)
         
         if subdir_filename.endswith(".zip") and len(subdir_filename) > 30:   # if it is a just a file-zip (e.g. 1afn32n221314n1lnl1ln1ln1ldndndafjkjvi.zip)
            unzip_file(source, flattened_malware_bazaar_dirpath, password="infected")

         if subdir_filename.endswith(".ps1"):
            

            destination = os.path.join(flattened_malware_bazaar_dirpath, subdir_filename)
            shutil.copy(source, destination)


```